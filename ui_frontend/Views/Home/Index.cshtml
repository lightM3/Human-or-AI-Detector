<!DOCTYPE html>
<html lang="tr" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Dedektifi - Pro Sürüm</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #4facfe;
            --secondary-color: #00f2fe;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.6);
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #333;
            overflow-x: hidden;
        }

        @@keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .navbar {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .brand-icon { animation: float 3s ease-in-out infinite; }

        .glass-card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.25);
        }

        textarea {
            background-color: rgba(255, 255, 255, 0.5) !important;
            border: 2px solid transparent !important;
            transition: all 0.4s ease;
        }

        textarea:focus {
            background-color: #fff !important;
            border-color: var(--primary-color) !important;
            box-shadow: 0 0 15px rgba(79, 172, 254, 0.3);
            transform: scale(1.01);
        }

        .btn-glow {
            background-image: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
            border: none;
            color: white;
            padding: 15px 45px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-size: 200% auto;
            box-shadow: 0 0 20px #eee;
            border-radius: 50px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .btn-glow:hover {
            background-position: right center;
            color: #fff;
            text-decoration: none;
            box-shadow: 0 0 30px rgba(0, 242, 254, 0.6);
            transform: scale(1.05);
        }

        .result-card {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        .result-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .gauge-container {
            position: relative;
            width: 160px;
            height: 80px;
            margin: 0 auto;
            overflow: hidden;
        }
      /* Göstergenin arka planı (Boş kısım) */
.gauge-bg {
    position: absolute; 
    top: 0; 
    left: 0; 
    width: 160px; 
    height: 160px;
    background: rgba(255, 255, 255, 0.1); /* Silik gri/beyaz */
    border-radius: 50%;
    /* İsteğe bağlı: Boş kısma hafif bir çizgi ekler */
    border: 1px solid rgba(255,255,255,0.1); 
}

/* Göstergenin dolan kısmı (Tek renk - Neon Mavisi) */
.gauge-fill {
    position: absolute; 
    top: 0; 
    left: 0; 
    width: 160px; 
    height: 160px;
    /* ÖNCEKİ RENKLİ GRADIENT YERİNE BU SATIR GELİYOR: */
    /* Üst yarısı mavi, alt yarısı şeffaf olan bir daire oluşturuyoruz. 
       Döndükçe mavi kısım görünür hale geliyor. */
    background: conic-gradient(from 270deg, #00f2fe 0%, #4facfe 50%, transparent 50%, transparent 100%);
    
    border-radius: 50%;
    transform: rotate(-180deg); /* Başlangıç konumu (Boş) */
    transform-origin: center;
    transition: transform 2s cubic-bezier(0.34, 1.56, 0.64, 1);
    /* Sadece üst yarısını göster */
    clip-path: polygon(0 0, 100% 0, 100% 50%, 0 50%);
}
        .gauge-cover {
            position: absolute; top: 20px; left: 20px; width: 120px; height: 120px;
            background: #fff; border-radius: 50%; z-index: 2;
            box-shadow: inset 0 5px 10px rgba(0,0,0,0.1);
        }
        .gauge-value {
            position: absolute; bottom: 5px; left: 0; right: 0;
            text-align: center; font-weight: 800; font-size: 1.4rem; color: #444; z-index: 3;
        }

        .spinner-wrapper {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .custom-loader {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: conic-gradient(#0000 10%, #4facfe);
            -webkit-mask: radial-gradient(farthest-side,#0000 calc(100% - 8px),#000 0);
            animation: s3 1s infinite linear;
            margin: 0 auto;
        }
        @@keyframes s3 {to{transform: rotate(1turn)}}
        @@keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        @@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .animate-up {
            animation: fadeInUp 1s ease-out forwards;
            opacity: 0;
        }
        @@keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* --- YENİ LOGO TASARIMI BAŞLANGIÇ --- */
.brand-container {
    display: flex;
    align-items: center;
    text-decoration: none; /* Link alt çizgisini kaldır */
}

/* Logonun etrafındaki elmas şeklindeki kutu */
.logo-wrapper {
    position: relative;
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, #00f2fe 0%, #4facfe 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    transform: rotate(45deg); /* Kutuyu döndür */
    box-shadow: 0 0 15px rgba(0, 242, 254, 0.6); /* Neon parlaması */
    margin-right: 15px;
    margin-left: 10px;
    transition: all 0.3s ease;
}

.brand-container:hover .logo-wrapper {
    transform: rotate(225deg); /* Mouse gelince dönsün */
    box-shadow: 0 0 25px rgba(0, 242, 254, 0.9);
}

/* İkonun kendisi (Dönmeyi geri alıyoruz ki ikon düz dursun) */
.logo-icon {
    font-size: 1.4rem;
    color: white;
    transform: rotate(-45deg); 
}

/* Yazı Alanı */
.brand-title {
    font-family: 'Outfit', sans-serif;
    font-weight: 800;
    font-size: 1.6rem;
    letter-spacing: -0.5px;
    background: -webkit-linear-gradient(#fff, #a6c1ee);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0px 0px 10px rgba(79, 172, 254, 0.3);
}

.brand-badge {
    background: #ff0055; /* Kontrast yaratması için Neon Pembe */
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 6px;
    margin-left: 5px;
    vertical-align: top;
    box-shadow: 0 0 10px rgba(255, 0, 85, 0.4);
}
/* --- YENİ LOGO TASARIMI BİTİŞ --- */
    </style>
</head>
<body class="d-flex flex-column h-100">

   <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        
        <a class="navbar-brand brand-container" href="#">
            <div class="logo-wrapper">
                <i class="fas fa-fingerprint logo-icon"></i>
            </div>
            
            <div>
                <span class="brand-title">Zero</span>
                <span class="brand-badge">PRO</span>
            </div>
        </a>
        <button class="navbar-toggler navbar-dark border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</nav>

    <main class="flex-shrink-0 mt-5 pt-5 mb-5">
        <div class="container mt-4">
            
            <div class="row justify-content-center animate-up" style="animation-delay: 0.1s;">
                <div class="col-lg-8 text-center mb-4">
                    <h1 class="display-5 fw-bold text-white mb-3" style="text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                        Yapay Zeka Tespit Sistemi
                    </h1>
                    <p class="text-white lead" style="text-shadow: 0 1px 5px rgba(0,0,0,0.1);">
                        Akademik metinlerin veya makale özetlerinin insan eliyle mi yoksa AI tarafından mı yazıldığını anında analiz edin.
                    </p>
                </div>
            </div>

            <div class="row justify-content-center animate-up" style="animation-delay: 0.3s;">
                <div class="col-lg-9">
                    <div class="card glass-card p-5">
                        <div class="mb-4">
                            <label for="inputText" class="form-label fw-bold text-muted text-uppercase small">Analiz Edilecek Metin</label>
                            <textarea class="form-control" id="inputText" rows="6" placeholder="Metni buraya yapıştırın... (Min 50 kelime önerilir)"></textarea>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-glow btn-lg rounded-pill" onclick="analyzeText()">
                                <i class="fas fa-microchip me-2"></i>Analizi Başlat
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="loading" class="spinner-wrapper text-center mt-5">
                <div class="custom-loader"></div>
                <h5 class="mt-3 text-white fw-light">Modeller veri işliyor...</h5>
                <p class="text-white-50 small">Random Forest, Logistic Regression ve Naive Bayes çalıştırılıyor</p>
            </div>

            <div id="result-area" class="mt-5" style="display: none;">
                
                <div class="row justify-content-center mb-4">
                    <div class="col-lg-6">
                        <div class="alert glass-card text-center border-0 shadow-lg result-card" id="main-result-card">
                            <h6 class="text-muted text-uppercase ls-1">Genel Karar</h6>
                            <h2 class="fw-bold mb-0" id="final-verdict">--</h2>
                        </div>
                    </div>
                </div>

                <div class="row g-4 justify-content-center">
                    
                    <div class="col-md-4">
                        <div class="card glass-card h-100 p-4 text-center result-card" id="res-card-1">
                            <div class="text-primary mb-3"><i class="fas fa-project-diagram fa-2x"></i></div>
                            <h5 class="card-title fw-bold">Naive Bayes</h5>
                            <div class="gauge-container mt-3">
                                <div class="gauge-bg"></div>
                                <div class="gauge-fill" id="fill-1"></div>
                                <div class="gauge-cover"></div>
                                <div class="gauge-value" id="score-1">0%</div>
                            </div>
                            <p class="text-muted mt-2 small">Olasılıksal Sınıflandırıcı</p>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card glass-card h-100 p-4 text-center result-card" id="res-card-2">
                            <div class="text-info mb-3"><i class="fas fa-chart-line fa-2x"></i></div>
                            <h5 class="card-title fw-bold">Logistic Regression</h5>
                            <div class="gauge-container mt-3">
                                <div class="gauge-bg"></div>
                                <div class="gauge-fill" id="fill-2"></div>
                                <div class="gauge-cover"></div>
                                <div class="gauge-value" id="score-2">0%</div>
                            </div>
                            <p class="text-muted mt-2 small">Doğrusal Sınıflandırma</p>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card glass-card h-100 p-4 text-center result-card" id="res-card-3">
                            <div class="text-success mb-3"><i class="fas fa-tree fa-2x"></i></div>
                            <h5 class="card-title fw-bold">Random Forest</h5>
                            <div class="gauge-container mt-3">
                                <div class="gauge-bg"></div>
                                <div class="gauge-fill" id="fill-3"></div>
                                <div class="gauge-cover"></div>
                                <div class="gauge-value" id="score-3">0%</div>
                            </div>
                            <p class="text-muted mt-2 small">Karar Ağaçları (Ensemble)</p>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </main>

    <footer class="footer mt-auto py-3" style="background: rgba(0,0,0,0.2); backdrop-filter: blur(5px);">
        <div class="container text-center text-white small">
            <span>2025 Human or AI Project &bull; Tasarlanmıştır <i class="fas fa-heart text-danger"></i></span>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // ASYNC Fonksiyona Çevirdik (Fetch için gerekli)
        async function analyzeText() {
            const text = document.getElementById("inputText").value;
            if(text.trim() === "") { 
                alert("Lütfen analiz edilecek bir metin giriniz."); 
                return; 
            }

            // 1. Ekranı temizle ve Loading göster
            document.getElementById("result-area").style.display = "none";
            document.getElementById("loading").style.display = "block";
            
            // Animasyonları sıfırla
            resetAnimations();

            try {
                // 2. BACKEND'E GERÇEK İSTEK (C# Controller)
                const response = await fetch('/Home/Analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: text })
                });

                if (!response.ok) {
                    throw new Error("Sunucu ile iletişim hatası!");
                }

                // 3. Gelen veriyi al
                const data = await response.json();

                // Eğer backend'den { error: "..." } geldiyse
                if (data.error) {
                    alert("Hata: " + data.error);
                    document.getElementById("loading").style.display = "none";
                    return;
                }

                // 4. Loading gizle, Sonuçları göster
                document.getElementById("loading").style.display = "none";
                document.getElementById("result-area").style.display = "block";
                
                // Animasyonlu Gösterim
                animateEntry(data);

            } catch (error) {
                console.error("Hata:", error);
                alert("Bir hata oluştu: Python API çalışıyor mu?");
                document.getElementById("loading").style.display = "none";
            }
        }

        function resetAnimations() {
            const cards = document.querySelectorAll('.result-card');
            cards.forEach(card => card.classList.remove('result-visible'));
        }

        function animateEntry(data) {
            updateGauges(data, false);
            updateVerdict(data.final_decision);

            const cards = document.querySelectorAll('.result-card');
            
            setTimeout(() => { cards[0].classList.add('result-visible'); }, 100); 
            setTimeout(() => { cards[1].classList.add('result-visible'); }, 300); 
            setTimeout(() => { cards[2].classList.add('result-visible'); }, 500); 
            setTimeout(() => { cards[3].classList.add('result-visible'); }, 700); 

            setTimeout(() => {
                updateGauges(data, true);
            }, 1000);
        }

        function updateVerdict(verdict) {
            const el = document.getElementById("final-verdict");
            el.innerText = verdict;
            if(verdict.includes("AI") || verdict.includes("Yapay")) {
                el.style.color = "#d50000"; // Kırmızı
            } else {
                el.style.color = "#00c853"; // Yeşil
            }
        }

        function updateGauges(data, animate) {
            setGauge('fill-1', 'score-1', animate ? data.model1_score : 0);
            setGauge('fill-2', 'score-2', animate ? data.model2_score : 0);
            setGauge('fill-3', 'score-3', animate ? data.model3_score : 0);
        }

        function setGauge(fillId, textId, score) {
            // Güvenlik kontrolü (NaN gelirse 0 yap)
            if (isNaN(score)) score = 0;
            
            const percentage = Math.round(score * 100);
            const rotation = -180 + (score * 180); 
            
            document.getElementById(fillId).style.transform = `rotate(${rotation}deg)`;
            document.getElementById(textId).innerText = `%${percentage}`;
        }
    </script>
</body>
</html>